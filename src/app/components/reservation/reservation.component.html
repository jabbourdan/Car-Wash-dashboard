<div class="form-group mb-0 d-flex align-items-center" style="margin-bottom: 20px;">
    <input type="search" class="form-control border-0 shadow-none"
        placeholder="Search by number, customer name or partner name" [(ngModel)]="state.searchTerm" />
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th (click)="toggleSort('number')">
                    Number
                    <span *ngIf="state.sortColumn === 'number'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="toggleSort('arrivalTimeFrom')">
                    Arrival Time
                    <span *ngIf="state.sortColumn === 'arrivalTimeFrom'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="toggleSort('customer.name')">
                    Customer Name
                    <span *ngIf="state.sortColumn === 'customer.name'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="toggleSort('totalItemsPrice')">
                    Total Price
                    <span *ngIf="state.sortColumn === 'totalItemsPrice'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="toggleSort('totalTransactionsAmount')">
                    Total Transactions
                    <span *ngIf="state.sortColumn === 'totalTransactionsAmount'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="toggleSort('lastReservationEvents.statusText')">
                    Status
                    <span *ngIf="state.sortColumn === 'lastReservationEvents.statusText'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="toggleSort('assignedPartners.0.name')">
                    Partner
                    <span *ngIf="state.sortColumn === 'assignedPartners.0.name'">
                        {{ state.sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let res of filteredAndSortedReservations">
                <td>{{ res.number }}</td>
                <td>{{ res.arrivalTimeFrom }}</td>
                <td>{{ res.customer?.name }}</td>
                <td>{{ res.totalItemsPrice }}</td>
                <td>{{ res.totalTransactionsAmount }}</td>
                <td>{{ res.lastReservationEvents?.statusText }}</td>
                <td>{{ res.assignedPartners?.[0]?.name || 'N/A' }}</td>
            </tr>
        </tbody>
    </table>
</div>